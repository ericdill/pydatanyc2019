# Setup

1. Install dask-gateway into [kubernetes](https://gateway.dask.org/install-kube.html) , [Yarn](https://gateway.dask.org/install-kube.html) cluster, or another supported backend.

My helm config looks like this:
```
gateway:
  proxyToken: "SOME AUTOGENERATED TOKEN"

  clusterManager:
    clusterStartTimeout: 600
    workerStartTimeout: 600

  auth:
    dummy:
      password: "SOME PASSWORD"

  extraConfig: |
    from dask_gateway_server.options import Options, Integer, Float, String

    def option_handler(options):
        return {
            "worker_cores": options.worker_cores,
            "worker_memory": "%fG" % options.worker_memory,
            "image": options.image,
        }

    c.DaskGateway.cluster_manager_options = Options(
        Integer("worker_cores", 2, min=1, max=4, label="Worker Cores"),
        Float("worker_memory", 8, min=2, max=16, label="Worker Memory (GiB)"),
        String("image", default="ericdill/dask-gateway:0.5.0.2", label="Image"),
        handler=option_handler,)
```

2. Create a conda environment based on the dask-env.yml file:
`conda env create -f dask-env.yml`

3. You'll also need to build a docker image with the same versions of dask, distributed and dask-gateway:

`docker build . -t <docker username>/dask-gateway:<some tag>`

e.g., 

`docker build . -t ericdill/dask-gateway:0.5.0`

And then upload that docker image to docker hub:

`docker push -t <docker username>/dask-gateway:<some tag>`

e.g., 

`docker push -t ericdill/dask-gateway:0.5.0`

4. Write a gateway.yaml file into [the dask config directory](https://docs.dask.org/en/latest/configuration.html).

Mine looks like this:
```
gateway:
  address: "http://35.184.59.242"
  proxy-address: "tls://34.69.194.120:8786"

  auth:
    kwargs:
      password: "SOME PASSWORD"
```